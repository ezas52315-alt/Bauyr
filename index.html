<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Марат Қабанбаев «Бауыр» әңгімесі</title>
    <!-- Подключение шрифтов -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* Базовые настройки */
        :root {
            --bg-color: #0d0d0d;
            --text-color: #e0e0e0;
            --accent-color: #c5a059;
            --accent-hover: #e8c47c;
            --card-bg: #1a1a1a;
            --font-title: 'Playfair Display', serif;
            --font-text: 'Montserrat', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-text);
            line-height: 1.6;
            overflow-x: hidden;
            background-image: radial-gradient(circle at center, rgba(197, 160, 89, 0.03) 0%, transparent 70%);
        }

        /* Навигация */
        nav {
            position: fixed; top: 0; width: 100%;
            background: rgba(13, 13, 13, 0.95);
            padding: 20px 0; z-index: 1000;
            border-bottom: 1px solid rgba(197, 160, 89, 0.2);
            backdrop-filter: blur(5px);
        }

        .nav-container {
            max-width: 1200px; margin: 0 auto;
            display: flex; justify-content: space-between;
            align-items: center; padding: 0 20px;
        }

        .logo {
            font-family: var(--font-title); color: var(--accent-color);
            font-size: 24px; font-weight: 700; text-decoration: none;
            letter-spacing: 2px;
        }

        .nav-links { list-style: none; display: flex; gap: 20px; }
        .nav-links a {
            color: var(--text-color); text-decoration: none;
            font-size: 13px; text-transform: uppercase;
            letter-spacing: 1px; transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--accent-color); }

        /* Главный экран (Hero) */
        .hero {
            height: 100vh; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.9)), url('https://images.unsplash.com/photo-1481627834876-b7833e8f5570?q=80&w=2000&auto=format&fit=crop') center/cover;
            padding: 0 20px; position: relative;
        }

        .hero::after {
            content: ''; position: absolute; bottom: 0; left: 0;
            width: 100%; height: 150px;
            background: linear-gradient(transparent, var(--bg-color));
        }

        .hero-subtitle {
            color: var(--accent-color); letter-spacing: 5px;
            text-transform: uppercase; margin-bottom: 20px;
            font-size: 16px; z-index: 2;
        }

        .hero h1 {
            font-family: var(--font-title); font-size: clamp(40px, 6vw, 80px);
            margin-bottom: 30px; z-index: 2;
            text-shadow: 0 4px 20px rgba(0,0,0,0.8);
        }

        .hero-btn {
            display: inline-block; padding: 15px 40px;
            border: 2px solid var(--accent-color); color: var(--accent-color);
            text-decoration: none; font-family: var(--font-title);
            font-size: 18px; text-transform: uppercase;
            letter-spacing: 2px; transition: all 0.3s;
            z-index: 2; cursor: pointer; background: transparent;
        }

        .hero-btn:hover { background: var(--accent-color); color: #000; }

        /* Контейнер для секций */
        .section-container { max-width: 1200px; margin: 0 auto; padding: 100px 20px; }
        .section-title {
            font-family: var(--font-title); font-size: 40px;
            color: var(--accent-color); text-align: center;
            margin-bottom: 60px; position: relative;
        }
        .section-title::after {
            content: ''; display: block; width: 100px; height: 2px;
            background: var(--accent-color); margin: 20px auto 0;
        }

        /* Секция Автора */
        .author-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; }
        .author-img {
            width: 100%; border: 1px solid var(--accent-color);
            padding: 15px; background: var(--card-bg);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); position: relative;
        }
        .author-img::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: repeating-linear-gradient(transparent, transparent 2px, rgba(0,0,0,0.1) 2px, rgba(0,0,0,0.1) 4px);
            pointer-events: none;
        }
        .author-img img { width: 100%; height: auto; display: block; filter: grayscale(80%) sepia(20%) contrast(1.2); }
        .author-text h3 { font-family: var(--font-title); font-size: 28px; margin-bottom: 20px; color: #fff; }
        .author-text p { font-size: 18px; margin-bottom: 20px; color: #bbb; }

        /* Презентация и PDF */
        .presentation-wrapper {
            position: relative; width: 100%; padding-bottom: 56.25%; height: 0;
            border: 2px solid var(--accent-color); box-shadow: 0 0 40px rgba(197, 160, 89, 0.15); background: #000;
        }
        .presentation-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        
        .pdf-wrapper {
            position: relative; width: 100%; height: 80vh; min-height: 600px;
            border: 2px solid var(--accent-color); box-shadow: 0 0 40px rgba(197, 160, 89, 0.15); background: #222;
        }
        .pdf-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        .pdf-notice { text-align: center; margin-top: 15px; color: #888; font-style: italic; font-size: 14px; }

        /* ИНТЕРАКТИВНАЯ ИГРА (4 колонки) */
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px; background: #222; padding: 20px;
            border: 2px solid var(--accent-color); border-radius: 8px;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
        }

        .game-header {
            background: var(--accent-color); color: #000;
            font-family: var(--font-title); font-size: 18px; font-weight: bold;
            text-align: center; padding: 15px 5px; text-transform: uppercase;
            border-radius: 4px; box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            display: flex; align-items: center; justify-content: center;
        }

        .game-cell {
            background: #111; color: var(--accent-color);
            font-family: var(--font-title); font-size: 32px; font-weight: bold;
            text-align: center; padding: 25px 10px; cursor: pointer;
            border: 1px solid rgba(197, 160, 89, 0.3); border-radius: 4px;
            transition: all 0.3s ease; box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .game-cell:hover {
            background: rgba(197, 160, 89, 0.1); border-color: var(--accent-color);
            transform: scale(1.05); text-shadow: 0 0 10px var(--accent-color);
        }

        .game-cell.played {
            opacity: 0.2; pointer-events: none; color: #555; border-color: #333;
        }

        /* Тест батырмалары */
        .test-options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 25px; }
        .test-option-btn {
            background: #1a1a1a; border: 1px solid var(--accent-color); color: #e0e0e0;
            padding: 15px; font-family: var(--font-text); font-size: 16px;
            cursor: pointer; transition: all 0.3s; border-radius: 4px;
        }
        .test-option-btn:hover { background: rgba(197, 160, 89, 0.2); }
        .test-option-btn.correct { background: #2e7d32; border-color: #4caf50; color: #fff; }
        .test-option-btn.wrong { background: #c62828; border-color: #f44336; color: #fff; }

        /* Интерактивные задания (Письма) */
        .tasks-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .task-card {
            background: var(--card-bg); border-top: 4px solid var(--accent-color);
            padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex; flex-direction: column;
        }
        .task-card h3 { font-family: var(--font-title); font-size: 26px; color: var(--accent-color); margin-bottom: 15px; }
        .task-context { font-size: 16px; color: #aaa; margin-bottom: 25px; font-style: italic; border-left: 2px solid #555; padding-left: 15px; }
        .task-form { display: flex; flex-direction: column; flex-grow: 1; }
        .task-form textarea {
            width: 100%; flex-grow: 1; min-height: 200px;
            background: #111; border: 1px solid #333; color: #fff;
            padding: 15px; font-family: var(--font-text); font-size: 16px;
            resize: vertical; margin-bottom: 20px; transition: border-color 0.3s;
        }
        .task-form textarea:focus { outline: none; border-color: var(--accent-color); }
        .submit-btn {
            background: var(--accent-color); color: #000; border: none;
            padding: 15px; font-family: var(--font-title); font-size: 18px;
            text-transform: uppercase; cursor: pointer; transition: background 0.3s;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .submit-btn:hover { background: var(--accent-hover); }

        footer { background: #050505; text-align: center; padding: 40px 20px; border-top: 1px solid #222; }
        footer p { color: #666; font-size: 14px; }

        /* Модальные окна */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); display: flex; justify-content: center;
            align-items: center; z-index: 2000; opacity: 0; pointer-events: none;
            transition: opacity 0.3s ease; backdrop-filter: blur(5px);
        }
        .modal-overlay.active { opacity: 1; pointer-events: all; }
        .modal-content {
            background: var(--card-bg); padding: 40px; border: 2px solid var(--accent-color);
            text-align: center; max-width: 650px; width: 90%;
            transform: translateY(20px) scale(0.95); transition: all 0.3s ease; position: relative;
        }
        .modal-overlay.active .modal-content { transform: translateY(0) scale(1); }
        .modal-content h3 { font-family: var(--font-title); font-size: 28px; margin-bottom: 20px; color: var(--accent-color); }
        .modal-content p { color: #eee; font-size: 20px; margin-bottom: 20px; line-height: 1.5; }
        
        .modal-close, .modal-action-btn {
            background: transparent; border: 1px solid var(--accent-color); color: var(--accent-color);
            padding: 12px 30px; cursor: pointer; text-transform: uppercase;
            font-family: var(--font-title); font-size: 16px; transition: all 0.3s; margin: 5px;
        }
        .modal-action-btn { background: var(--accent-color); color: #000; }
        .modal-action-btn:hover { background: var(--accent-hover); }
        .modal-close:hover { background: rgba(197, 160, 89, 0.2); }

        @media (max-width: 900px) {
            .author-grid, .tasks-grid { grid-template-columns: 1fr; }
            .nav-links { display: none; }
            .game-board { grid-template-columns: repeat(2, 1fr); gap: 10px; }
            .test-options { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="nav-container">
            <a href="#" class="logo">ӘДЕБИЕТ</a>
            <ul class="nav-links">
                <li><a href="#author">Автор</a></li>
                <li><a href="#presentation">Презентация</a></li>
                <li><a href="#pdf-info">Қосымша</a></li>
                <li><a href="#game-section">Бәйге</a></li>
                <li><a href="#tasks">Тапсырма</a></li>
            </ul>
        </div>
    </nav>

    <header class="hero">
        <p class="hero-subtitle">Интерактивті әдеби сайт</p>
        <h1>Марат Қабанбаев<br>«Бауыр» әңгімесі</h1>
        <a href="#presentation" class="hero-btn" onclick="initAudio()">Кешенді бастау <i class="fa-solid fa-play"></i></a>
    </header>

    <section id="author" class="section-container">
        <h2 class="section-title">Автор туралы</h2>
        <div class="author-grid">
            <div class="author-img">
                <img src="https://images.unsplash.com/photo-1532012197267-da84d127e765?q=80&w=1000&auto=format&fit=crop" alt="Кітаптар">
            </div>
            <div class="author-text">
                <h3>Марат Қабанбаев</h3>
                <p>Қазақ әдебиетіндегі адам психологиясын, соның ішінде балалар мен жасөспірімдердің ішкі әлемін терең зерттеген жазушы.</p>
                <p>Бұл интерактивті кешенде біз автордың стиліне сүйене отырып, <strong>«Бауыр»</strong> әңгімесіндегі көтерілген мәселелерді: бауырмалдық, тіл мен діл, мәңгүрттік тақырыптарын тереңірек қарастырамыз.</p>
            </div>
        </div>
    </section>

    <section id="presentation" class="section-container" style="background-color: #0a0a0a;">
        <h2 class="section-title">Оқу материалы (Презентация)</h2>
        <div class="presentation-wrapper">
            <iframe src="https://docs.google.com/presentation/d/e/2PACX-1vRHtJCMgWX_BDBplnhzQ4HrdbDFo8YiqI5mBT7e7r4m3rjdF7dOf7Wk38q2N4YHNW0AyGlqTPiPP3a0/pubembed?start=false&loop=false&delayms=3000" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
        </div>
    </section>

    <section id="pdf-info" class="section-container">
        <h2 class="section-title">Қосымша мәліметтер (PDF)</h2>
        <div class="pdf-wrapper">
            <iframe src="https://drive.google.com/file/d/14Vw3AEoGVqzP1Z_z2CUk8oCxr5DRcu7B/preview" frameborder="0" allow="autoplay" allowfullscreen="true"></iframe>
        </div>
        <p class="pdf-notice">* Файл Google Drive базасынан тікелей оқылып тұрғандықтан, түпнұсқа түрінде беріліп отыр.</p>
    </section>

    <!-- Секция: Игра (Своя игра) -->
    <section id="game-section" class="section-container" style="background-color: #0a0a0a;">
        <h2 class="section-title">Хроника сырлары: Зияткерлік бәйге</h2>
        <p style="text-align: center; margin-bottom: 40px; color: #aaa; font-style: italic;">Жаңа 20 сұрақ. Соңғы екі баған тест түрінде берілген. Дыбыстық эффектілер қосылған!</p>
        
        <div class="game-board">
            <!-- Заголовки (4 колонки) -->
            <div class="game-header">Кейіпкерлер<br>(Ауызша)</div>
            <div class="game-header">Мекен & Уақыт<br>(Ауызша)</div>
            <div class="game-header">Детальдар<br>(Тест)</div>
            <div class="game-header">Оқиғалар<br>(Тест)</div>

            <!-- Строка 10 -->
            <div class="game-cell" onclick="openQuestion('cat1-10', this)">10</div>
            <div class="game-cell" onclick="openQuestion('cat2-10', this)">10</div>
            <div class="game-cell" onclick="openQuestion('cat3-10', this)">10</div>
            <div class="game-cell" onclick="openQuestion('cat4-10', this)">10</div>

            <!-- Строка 20 -->
            <div class="game-cell" onclick="openQuestion('cat1-20', this)">20</div>
            <div class="game-cell" onclick="openQuestion('cat2-20', this)">20</div>
            <div class="game-cell" onclick="openQuestion('cat3-20', this)">20</div>
            <div class="game-cell" onclick="openQuestion('cat4-20', this)">20</div>

            <!-- Строка 30 -->
            <div class="game-cell" onclick="openQuestion('cat1-30', this)">30</div>
            <div class="game-cell" onclick="openQuestion('cat2-30', this)">30</div>
            <div class="game-cell" onclick="openQuestion('cat3-30', this)">30</div>
            <div class="game-cell" onclick="openQuestion('cat4-30', this)">30</div>

            <!-- Строка 40 -->
            <div class="game-cell" onclick="openQuestion('cat1-40', this)">40</div>
            <div class="game-cell" onclick="openQuestion('cat2-40', this)">40</div>
            <div class="game-cell" onclick="openQuestion('cat3-40', this)">40</div>
            <div class="game-cell" onclick="openQuestion('cat4-40', this)">40</div>

            <!-- Строка 50 -->
            <div class="game-cell" onclick="openQuestion('cat1-50', this)">50</div>
            <div class="game-cell" onclick="openQuestion('cat2-50', this)">50</div>
            <div class="game-cell" onclick="openQuestion('cat3-50', this)">50</div>
            <div class="game-cell" onclick="openQuestion('cat4-50', this)">50</div>
        </div>
    </section>

    <!-- Секция: Интерактивные задания -->
    <section id="tasks" class="section-container">
        <h2 class="section-title">Шығармашылық тапсырмалар</h2>
        <div class="tasks-grid">
            <div class="task-card">
                <h3>1. Манапқа хат</h3>
                <div class="task-context">Манапқа төзімділігі үшін ризашылық білдіріп хат жазыңыз.</div>
                <form class="task-form" onsubmit="submitForm(event, 'Манапқа жазған хатыңыз')">
                    <textarea placeholder="Құрметті Манап аға..." required></textarea>
                    <button type="submit" class="submit-btn"><i class="fa-solid fa-paper-plane"></i> Жіберу</button>
                </form>
            </div>
            <div class="task-card">
                <h3>2. Қалиға (Галиға) хат</h3>
                <div class="task-context">Қалиға (Гали) өз тамырынан ажырамау туралы ой салып жазыңыз.</div>
                <form class="task-form" onsubmit="submitForm(event, 'Қалиға (Галиға) жазған хатыңыз')">
                    <textarea placeholder="Қали (Гали), сенің басты қателігің..." required></textarea>
                    <button type="submit" class="submit-btn"><i class="fa-solid fa-paper-plane"></i> Жіберу</button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy; 2026 Әдебиет сабағына арналған интерактивті кешен. Дизайн хроника-кинофильм стилінде.</p>
    </footer>

    <!-- Модальное окно для Игры -->
    <div class="modal-overlay" id="gameModal">
        <div class="modal-content">
            <h3 id="gameModalTitle">Сұрақ</h3>
            <p id="gameModalText">Сұрақ мәтіні осында болады...</p>
            
            <!-- Тест нұсқалары осында шығады -->
            <div id="testOptions" class="test-options" style="display: none;"></div>

            <div id="gameModalActions" style="margin-top: 25px;">
                <button class="modal-action-btn" id="showAnswerBtn" onclick="showAnswer()">Жауабын көру</button>
                <button class="modal-close" onclick="closeGameModal()">Жабу</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно для Успеха -->
    <div class="modal-overlay" id="successModal">
        <div class="modal-content">
            <i class="fa-solid fa-circle-check modal-icon" style="font-size: 50px;"></i>
            <h3>Керемет!</h3>
            <p id="modalMessage">Сәтті сақталды.</p>
            <button class="modal-close" onclick="closeSuccessModal()">Жабу</button>
        </div>
    </div>

    <!-- JavaScript логикасы -->
    <script>
        // WEB AUDIO API - Дыбыстарды браузердің өзі шығарады (100% жұмыс істейді)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function initAudio() {
            if(audioCtx.state === 'suspended') audioCtx.resume();
        }

        // Ұяшықты басқан кездегі "шертпе" дыбыс
        function playClickSound() {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(800, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(300, audioCtx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.5, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.1);
        }

        // Дұрыс жауап дыбысы (жағымды шылдыр)
        function playCorrectSound() {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(523.25, audioCtx.currentTime); // C5
            osc.frequency.setValueAtTime(659.25, audioCtx.currentTime + 0.1); // E5
            osc.frequency.setValueAtTime(1046.50, audioCtx.currentTime + 0.2); // C6
            gain.gain.setValueAtTime(0.5, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.4);
        }

        // Қате жауап дыбысы (дөрекі сигнал)
        function playWrongSound() {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.3);
            gain.gain.setValueAtTime(0.5, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.3);
        }

        // Деректер: 20 Сұрақ
        const gameData = {
            // Категория 1: Кейіпкерлер (Мәтіндік)
            'cat1-10': { type: 'text', q: 'Алматыдан Сибирьге інісін іздеп келген басты кейіпкер кім?', a: 'Манап' },
            'cat1-20': { type: 'text', q: 'Манаптың інісі, балалар үйінің тәрбиеленушісі, спортшы.', a: 'Қали (Гали)' },
            'cat1-30': { type: 'text', q: 'Балалар үйінің директоры, көпті көрген сыпа кісі.', a: 'Виктория Ивановна' },
            'cat1-40': { type: 'text', q: 'Балалар үйінің аға тәрбиешісі.', a: 'Эльжбета Сергеевна' },
            'cat1-50': { type: 'text', q: 'Қали үлгі тұтатын, балалар үйіне келіп кеткен әскери ұшқыш.', a: 'Сидоров Александр Павлович' },
            
            // Категория 2: Уақыт пен Мекен (Мәтіндік)
            'cat2-10': { type: 'text', q: 'Оқиға Ресейдің қай қаласында өтеді?', a: 'Омбы (Омск)' },
            'cat2-20': { type: 'text', q: 'Болашақ жаңа балалар қалашығы қай өзеннің жағасында салынбақ?', a: 'Ертіс өзені' },
            'cat2-30': { type: 'text', q: 'Манап пен Қалидың туған ауылы, таулы аймақ қалай аталады?', a: 'Қалғұты' },
            'cat2-40': { type: 'text', q: 'Манап інісін неше жыл бойы көрмеді?', a: 'Он бір (11) жыл' },
            'cat2-50': { type: 'text', q: 'Қалиды балалар үйіне алғаш неше жасында тапсырды?', a: 'Төрт жасында' },

            // Категория 3: Детальдар (ТЕСТ)
            'cat3-10': { type: 'test', q: 'Манап өзімен бірге інісіне қандай киім әкелді?', a: 'Костюм', 
                opts: ['Күрте', 'Костюм', 'Аяқ киім', 'Жейде'] },
            'cat3-20': { type: 'test', q: 'Қалидың табиғат бұрышына әкелген түлкі күшігінің аты кім?', a: 'Коля', 
                opts: ['Коля', 'Ақтөс', 'Патрикеевна', 'Гали'] },
            'cat3-30': { type: 'test', q: 'Манап қайтарда Қалиға көзімдей көрсін деп нені тастап кетті?', a: 'Дипломат', 
                opts: ['Сағат', 'Кітап', 'Дипломат', 'Ақша'] },
            'cat3-40': { type: 'test', q: 'Қали қандай спорт түрінен бірінші разряд алған?', a: 'Бокс', 
                opts: ['Күрес', 'Жеңіл атлетика', 'Бокс', 'Шахмат'] },
            'cat3-50': { type: 'test', q: 'Манап университетте қандай мамандықта оқып жүр?', a: 'Философ', 
                opts: ['Философ', 'Мұғалім', 'Заңгер', 'Дәрігер'] },

            // Категория 4: Оқиғалар (ТЕСТ)
            'cat4-10': { type: 'test', q: 'Қали мен Манаптың анасы қандай аурудан көз жұмды?', a: 'Қылтамақ', 
                opts: ['Жүрек ауруы', 'Туберкулез', 'Қылтамақ', 'Белгісіз'] },
            'cat4-20': { type: 'test', q: 'Манап әкесі Сымбаттың басына неден қорған көтерді?', a: 'Саман кірпіштен', 
                opts: ['Қызыл кірпіштен', 'Саман кірпіштен', 'Мәрмәр тастан', 'Ағаштан'] },
            'cat4-30': { type: 'test', q: 'Балалар үйі қандай мерекеге спорттық жарысқа дайындалуда?', a: '7 қараша', 
                opts: ['Жаңа жыл', '9 мамыр', '7 қараша', '1 мамыр'] },
            'cat4-40': { type: 'test', q: 'Қали болашақта кім болғысы келетінін айтты?', a: 'Әскери ұшқыш', 
                opts: ['Әскери ұшқыш', 'Такси жүргізушісі', 'Архитектор', 'Мұғалім'] },
            'cat4-50': { type: 'test', q: 'Манап пен Қалидың әкесінің есімі кім?', a: 'Сымбат', 
                opts: ['Төрекелді', 'Сымбат', 'Марат', 'Текебай'] }
        };

        let currentQuestionId = null;

        // Ойын логикасы
        function openQuestion(id, element) {
            playClickSound(); // Шертпе дыбыс

            currentQuestionId = id;
            const qData = gameData[id];

            document.getElementById('gameModalTitle').innerText = "Сұрақ: " + element.innerText;
            document.getElementById('gameModalText').innerHTML = qData.q;

            const optionsContainer = document.getElementById('testOptions');
            const showAnswerBtn = document.getElementById('showAnswerBtn');

            optionsContainer.innerHTML = ''; // Ескі батырмаларды тазалау

            if (qData.type === 'test') {
                showAnswerBtn.style.display = 'none'; // Тест болса, жауап көру түймесі жасырылады
                optionsContainer.style.display = 'grid'; // Нұсқалар көрсетіледі
                
                // Нұсқаларды құру
                qData.opts.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = 'test-option-btn';
                    btn.innerText = opt;
                    const isCorrect = (opt === qData.a);
                    btn.onclick = () => checkTestAnswer(btn, isCorrect, qData.a);
                    optionsContainer.appendChild(btn);
                });
            } else {
                showAnswerBtn.style.display = 'inline-block';
                optionsContainer.style.display = 'none';
            }

            document.getElementById('gameModal').classList.add('active');
            element.classList.add('played');
        }

        // Мәтіндік сұрақтың жауабын көру
        function showAnswer() {
            playClickSound();
            const text = document.getElementById('gameModalText');
            const showAnswerBtn = document.getElementById('showAnswerBtn');

            text.innerHTML += `<br><br><span style="color:#c5a059;">Дұрыс жауап:</span> <strong>${gameData[currentQuestionId].a}</strong>`;
            showAnswerBtn.style.display = 'none';
        }

        // Тест сұрағын тексеру және дыбыс шығару
        function checkTestAnswer(btn, isCorrect, correctText) {
            const options = document.querySelectorAll('.test-option-btn');
            options.forEach(b => b.style.pointerEvents = 'none'); // Қайта басуды бұғаттау

            if (isCorrect) {
                btn.classList.add('correct');
                playCorrectSound(); // Дұрыс дыбысы
                document.getElementById('gameModalText').innerHTML += `<br><br><span style="color:#4caf50; font-weight:bold;">Дұрыс!</span>`;
            } else {
                btn.classList.add('wrong');
                playWrongSound(); // Қате дыбысы
                
                // Дұрыс жауапты жасылмен көрсету
                options.forEach(b => {
                    if(b.innerText === correctText) b.classList.add('correct');
                });
                document.getElementById('gameModalText').innerHTML += `<br><br><span style="color:#f44336; font-weight:bold;">Қате! Дұрыс жауап: ${correctText}</span>`;
            }
        }

        function closeGameModal() {
            document.getElementById('gameModal').classList.remove('active');
        }

        // Форма жіберу
        function submitForm(event, taskName) {
            event.preventDefault(); 
            playClickSound();
            const textarea = event.target.querySelector('textarea');
            textarea.value = '';
            document.getElementById('modalMessage').innerText = taskName + " сәтті сақталды!";
            document.getElementById('successModal').classList.add('active');
        }

        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('active');
        }

        // Сыртынан басса жабылу
        window.onclick = function(event) {
            if (event.target === document.getElementById('gameModal')) closeGameModal();
            if (event.target === document.getElementById('successModal')) closeSuccessModal();
        }
    </script>

</body>
</html>